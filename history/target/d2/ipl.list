     1                                  ORG   0x7c00          ; 引导区加载位置
     2                                                        ; 与之相对的详细内存分区可参考 http://www.bioscentral.com/misc/bda.htm
     3                                  
     4                                  ;--------------------------------------- FAT12 格式描述 ------------------------------------------
     5                                  ; FAT12 引导扇区格式参见 http://blog.sina.com.cn/s/blog_3edcf6b80100cr08.html
     6 00000000 EB4E                    JMP   entry
     7 00000002 90                      DB    0x90
     8 00000003 48454C4C4F49504C        DB    "HELLOIPL"      ; OEM字符串，8字节（通常为格式化本磁盘的操作系统名称及版本）
     9 0000000B 0002                    DW    512             ; 每个扇区(sector)大小，必须为512(B)
    10 0000000D 01                      DB    1               ; 簇(cluster)的大小，必须为1（个扇区）
    11 0000000E 0100                    DW    1               ; FAT的起始扇区数（一般从第一个扇区开始）
    12 00000010 02                      DB    2               ; FAT的个数（必须为2）
    13 00000011 E000                    DW    224             ; 根目录的大小（一般设成224项）
    14 00000013 400B                    DW    2880            ; 该磁盘的大小（必须设成2880扇区，即1440KB）
    15 00000015 F0                      DB    0xf0            ; 磁盘的种类（必须为F0）
    16 00000016 0900                    DW    9               ; FAT的长度（必须是9扇区）
    17 00000018 1200                    DW    18              ; 每个磁道的扇区数（必须是18）
    18 0000001A 0200                    DW    2               ; 磁头数（必须是2）
    19 0000001C 00000000                DD    0               ; 不使用分区（必须是0）
    20 00000020 400B0000                DD    2880            ; 重写一次磁盘大小
    21 00000024 000029                  DB    0,0,0x29        ; 意义不名
    22 00000027 FFFFFFFF                DD    0xffffffff      ; （可能是）卷标号码
    23 0000002B 48454C4C4F2D4F5320-     DB    "HELLO-OS   "   ; 磁盘的名称（11字节）
    24 00000034 2020               
    25 00000036 4641543132202020        DB    "FAT12   "      ; 磁盘格式名称（8字节）
    26 0000003E <res 00000012>          RESB  18              ; 先空出18字节
    27          ******************       warning: uninitialized space declared in .text section: zeroing
    28                                  
    29                                  
    30                                  ;------------------------------------------ 程序主体 ---------------------------------------------
    31                                  entry:
    32 00000050 B80000                    MOV   AX,0          ; 初始化寄存器
    33 00000053 8ED0                      MOV   SS,AX
    34 00000055 BC007C                    MOV   SP,0x7c00
    35 00000058 8ED8                      MOV   DS,AX
    36 0000005A 8EC0                      MOV   ES,AX
    37 0000005C BE[7400]                  MOV   SI,msg
    38                                  
    39                                  putloop:
    40 0000005F 8A04                      MOV   AL,[SI]
    41 00000061 83C601                    ADD   SI,1          ; SI ++
    42 00000064 3C00                      CMP   AL,0
    43 00000066 7409                      JE    fin           ; 若AL = 0 则停止工作. 此处若改为JE entry则可无限向屏幕写入字符串
    44 00000068 B40E                      MOV   AH,0x0e       ; 显示一个文字
    45 0000006A BB0F00                    MOV   BX,15         ; 指定字符颜色
    46 0000006D CD10                      INT   0x10          ; 调用显卡BIOS中断
    47 0000006F EBEE                      JMP   putloop
    48                                  
    49                                  fin:
    50 00000071 F4                        HLT                 ; CPU挂起等待指令
    51 00000072 EBFD                      JMP   fin           ; 死循环
    52                                  
    53                                  ;------------------------------------------- 数据区块 --------------------------------------------
    54                                  msg:
    55 00000074 0A0A                      DB    0x0a, 0x0a            ; 换行。0x0a为换行符
    56 00000076 776861742074686520-       DB    "what the fuck"
    57 0000007F 6675636B           
    58 00000083 0A                        DB    0x0a                  ; 换行
    59 00000084 00                        DB    0
    60                                  
    61 00000085 00<rept>                TIMES (0x01FE-($-$$)) db 0    ; 填充当前扇区。不知道为何原文给定的填充结束位置为0x7dfe
    62                                                                ; 不过这个填充位置显然是错的，因为这样55AA标志便远在引导扇区之外
    63                                                                ; 因此我们将填充位置改为 0x01FE，因为 0x01FE + 2 = 0x0200恰好为
    64                                                                ; 第一个扇区的长度
    65 000001FE 55AA                    DB    0x55, 0xaa
